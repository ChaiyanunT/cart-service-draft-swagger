openapi: 3.0.3
info:
  title: Cart Service Draft Api Spec - OpenAPI 3.0
  version: 1.0.0
externalDocs:
  description: Cart Service draft spec swagger
  url: http://swagger.io
servers:
  - url: "https://proxy.qa.nocnoc-internal.com/cart-service"
paths:
  /v1/user/quotation/promotion/validation:
    post:
      summary: Validate list of coupon code with quotation data
      tags:
        - Quotation
      parameters:
       - name: x-nocnoc-platform
         in: header
         schema:
          type: string
       - name: x-nocnoc-device-os
         in: header
         schema:
          type: string
       - name: x-cookie-id
         in: header
         schema:
          type: string
       - name: x-session-id
         in: header
         schema: 
          type: string
       - name: x-nocnoc-device-id
         in: header
         description: device id generate from FE
         schema:
          type: string
       - name: x-request-id
         in: header
         schema:
          type: string
       - name: x-nocnoc-id
         in: header
         required: true
         description: nocnoc-id decrypt by local authorizer
         schema:
          type: string
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/promotionRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/quotationPromotionValidationResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
          
        '401':
          description: Unauthorize
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /v1/user/quotation:
    post:
      tags:
        - Quotation
      summary: Create Quotation
      description: ''
      operationId: Create Quotation
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
      requestBody:
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/CreateQuotationRequest'
      responses:
        '200':
          description: products with delivery options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateQuotationResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
    put:
      tags:
        - Quotation
      summary: Update Quotation
      description: ''
      operationId: Update Quotation
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
      requestBody:
        required: true 
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/UpdateQuotationRequest'
      responses:
        '200':
          description: products with delivery options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateQuotationResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /v1/user/quotation/summary:
    post:
      tags:
        - Quotation
      parameters:
       - name: x-nocnoc-id
         in: header
         required: true
         description: nocnoc-id decrypt by local authorizer
         schema:
          type: string
       - name: Accept-Language
         in: header
         description: not required and default to en
         schema:
          type: string
       - name: x-nocnoc-platform
         in: header
         required: false
         description: nocnoc-platform (when = "app" will get loyalty point)
         schema:
          type: string
         example: "web"
      summary: Calculate price and discount
      description: Calculate price and discount for both product and shipping
      operationId: quotationSummary
      requestBody:
        description: Sum the final quotation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/quotationSummaryRequest'
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/quotationSummaryResponse'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                InvalidParameter:
                  summary: invalid parameter
                  value:
                    errors:
                      title: "invalid_parameter"
                      message: "Invalid carrierId, please check request body"
                InvalidSignature:
                  summary: invalid signature
                  value:
                    errors:
                      title: "invalid_signature"
                      message: "Invalid quotationSignature, plase check request body"
                InvalidDeliveryOption:
                  summary: invalid delivery option
                  value:
                    errors:
                      title: "invalid_delivery_option"
                      message: "delivery option not found"
                InvalidQuotationData:
                  summary: invalid quotation data
                  value:
                    errors:
                      title: "invalid_quotation_data"
                      message: "Cannot decode quotationData, plase check request body"
        '401':
          description: Unauthorize
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ExternalServerError:
                  summary: Internal server error
                  value:  
                    errors:
                      title: "internal_server_error"
                      message: "Something wrong, or {{some error message}}"
                UnknownPromotionBusinessType:
                  summary: Unknown promotion business type
                  value:  
                    errors:
                      title: "unknown_promotion_business_type"
                      message: "Unknown promotion business type"
        '502':
          description: External Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ExternalServerError:
                  summary: External server error
                  value:  
                    errors:
                      title: "external_server_error"
                      message: "[Promotion] Get seller promotion sku pricing has error"
  /v1/user/cart:
    get:
      summary: Get Cart
      tags:
        - Cart
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-device-id
          in: header
          description: Required in guest mode
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/cartReponseModel'
          
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
          
        '401':
          description: Unauthorize
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /v1/user/orders:    
    post:
      summary: Create order
      tags:
      - Order
      parameters:
      - description: x-nocnoc-platform
        in: header
        name: x-nocnoc-platform
        schema:
          type: string
      - description: x-nocnoc-device-os
        in: header
        name: x-nocnoc-device-os
        schema:
          type: string
      - description: Not Required when x-nocnoc-platform is web
        in: header
        name: x-nocnoc-cookie-id
        schema:
          type: string
      - description: Not Required when x-nocnoc-platform is web
        in: header
        name: x-nocnoc-session-id
        schema:
          type: string
      - description: x-nocnoc-device-id
        in: header
        name: x-nocnoc-device-id
        schema:
          type: string
      - description: x-nocnoc-id
        in: header
        name: x-nocnoc-id
        schema:
          type: string
      - description: accept-language
        in: header
        name: accept-language
        schema:
          type: string
      requestBody:
        description: create order request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createOrderRequest'
        required: true
      responses:
        '201':
          description: Created operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createOrderResponse'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ErrorUnmarshal:
                  summary: error unmarshal
                  value:
                    errors:
                      title: "error_unmarshal"
                      message: "cannot unmarshal data"
                ErrorDecode64:
                  summary: error decode64
                  value:
                    errors:
                      title: "error_decode64"
                      message: "decode64 data error"
                InvalidSignature:
                  summary: invalid signature
                  value:
                    errors:
                      title: "invalid_signature"
                      message: "invalid signature"
                NotfoundAddress:
                  summary: not found address
                  value:
                    errors:
                      title: "notfound_address"
                      message: "not found address"
                NotfoundProduct:
                  summary: not found product
                  value:
                    errors:
                      title: "notfound_product"
                      message: "not found product"
                InvalidAllShipping:
                  summary: invalid all shipping
                  value:
                    errors:
                      title: "invalid_all_shipping"
                      message: "all shipping not available"
                InvalidSomeShipping:
                  summary: invalid some shipping
                  value:
                    errors:
                      title: "invalid_some_shipping"
                      message: "some shipping not available"
                OutOfStockProduct:
                  summary: out of stock product
                  value:
                    errors:
                      title: "out_of_stock_product"
                      message: "product out of stock"
                InvalidSelectedDelivery:
                  summary: invalid selected delivery
                  value:
                    errors:
                      title: "invalid_selected_delivery"
                      message: "invalid selected delivery"
                InvalidShippingCost:
                  summary: invalid shipping cost
                  value:
                    errors:
                      title: "invalid_shipping_cost"
                      message: "invalid shipping cost"
                InvalidPrice:
                  summary: invalid price
                  value:
                    errors:
                      title: "invalid_price"
                      message: "invalid price"
                InvalidPlatformPartnerCoupon:
                  summary: invalid platform partner coupon
                  value:
                    errors:
                      title: "invalid_platform_partner_coupon"
                      message: "invalid platform partner coupon"
                InvalidShopCoupon:
                  summary: invalid shop coupon
                  value:
                    errors:
                      title: "invalid_shop_coupon"
                      message: "invalid shop coupon"
                InvalidPoint:
                  summary: invalid point
                  value:
                    errors:
                      title: "invalid_point"
                      message: "invalid point"
                InvalidSummary:
                  summary: invalid summary
                  value:
                    errors:
                      title: "invalid_summary"
                      message: "invalid summary"
                InvalidCouponPayment:
                  summary: invalid coupon payment
                  value:
                    errors:
                      title: "invalid_coupon_payment"
                      message: "invalid coupon payment"
                InvalidIpp:
                  summary: invalid ipp
                  value:
                    errors:
                      title: "invalid_ipp"
                      message: "invalid ipp"
                InvalidIppPromotion:
                  summary: invalid ipp promotion
                  value:
                    errors:
                      title: "invalid_ipp_promotion"
                      message: "invalid ipp promotion"
                ErrorGetUserInfo:
                  summary: error get user info
                  value:
                    errors:
                      title: "error_get_user_info"
                      message: "error get user info"
                NotfoundUserInfo:
                  summary: not found user info
                  value:
                    errors:
                      title: "notfound_user_info"
                      message: "not found user info"
        '401':
          description: Unauthorize
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ErrorGetPromotionDetail:
                  summary: error get promotion detail
                  value:
                    errors:
                      title: "error_get_promotion_detail"
                      message: "error get promotion detail"
                ErrorBreakdownSaleOrder:
                  summary: error breakdown sale order
                  value:
                    errors:
                      title: "error_breakdown_sale_order"
                      message: "error breakdown sale order"
                ErrorGetNoncnocDiscountPoint:
                  summary: error get noncnoc discount point
                  value:
                    errors:
                      title: "error_get_noncnoc_discount_point"
                      message: "error get noncnoc discount point"
                ErrorGetAddress:
                  summary: error get address
                  value:
                    errors:
                      title: "error_get_address"
                      message: "error get address"
                ErrorProductRepository:
                  summary: error product repository
                  value:
                    errors:
                      title: "error_product_repository"
                      message: "cannot get products by SKUs from repository"
                ErrorCouponPaymentValidate:
                  summary: error coupon payment validate
                  value:
                    errors:
                      title: "error_coupon_payment_validate"
                      message: "error coupon payment validate"
                ErrorPromotionPartnershipValidate:
                  summary: error promotion partnership validate
                  value:
                    errors:
                      title: "error_promotion_partnership_validate"
                      message: "error promotion partnership validate"
                ErrorIppAssignment:
                  summary: error ipp assignment
                  value:
                    errors:
                      title: "error_ipp_assignment"
                      message: "error ipp assignment"
                ErrorCreateOrder:
                  summary: error create order
                  value:
                    errors:
                      title: "error_create_order"
                      message: "error create order"
                CreateOrderUnsuccessful:
                  summary: create order unsuccessful
                  value:
                    errors:
                      title: "create_order_unsuccessful"
                      message: "create order unsuccessful"
  /v1/admin/orders:    
    post:
      summary: Admin Create order
      tags:
      - Admin Order
      parameters:
      - description: x-nocnoc-platform
        in: header
        name: x-nocnoc-platform
        schema:
          type: string
      - description: x-nocnoc-device-os
        in: header
        name: x-nocnoc-device-os
        schema:
          type: string
      - description: Not Required when x-nocnoc-platform is web
        in: header
        name: x-nocnoc-cookie-id
        schema:
          type: string
      - description: Not Required when x-nocnoc-platform is web
        in: header
        name: x-nocnoc-session-id
        schema:
          type: string
      - description: x-nocnoc-device-id
        in: header
        name: x-nocnoc-device-id
        schema:
          type: string
      - description: x-nocnoc-id
        in: header
        name: x-nocnoc-id
        schema:
          type: string
      - description: accept-language
        in: header
        name: accept-language
        schema:
          type: string
      requestBody:
        description: create order request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/adminCreateOrderRequest'
        required: true
      responses:
        '201':
          description: Created operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/createOrderResponse'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ErrorUnmarshal:
                  summary: error unmarshal
                  value:
                    errors:
                      title: "error_unmarshal"
                      message: "cannot unmarshal data"
                ErrorDecode64:
                  summary: error decode64
                  value:
                    errors:
                      title: "error_decode64"
                      message: "decode64 data error"
                InvalidSignature:
                  summary: invalid signature
                  value:
                    errors:
                      title: "invalid_signature"
                      message: "invalid signature"
                NotfoundAddress:
                  summary: not found address
                  value:
                    errors:
                      title: "notfound_address"
                      message: "not found address"
                NotfoundProduct:
                  summary: not found product
                  value:
                    errors:
                      title: "notfound_product"
                      message: "not found product"
                InvalidAllShipping:
                  summary: invalid all shipping
                  value:
                    errors:
                      title: "invalid_all_shipping"
                      message: "all shipping not available"
                InvalidSomeShipping:
                  summary: invalid some shipping
                  value:
                    errors:
                      title: "invalid_some_shipping"
                      message: "some shipping not available"
                OutOfStockProduct:
                  summary: out of stock product
                  value:
                    errors:
                      title: "out_of_stock_product"
                      message: "product out of stock"
                InvalidSelectedDelivery:
                  summary: invalid selected delivery
                  value:
                    errors:
                      title: "invalid_selected_delivery"
                      message: "invalid selected delivery"
                InvalidShippingCost:
                  summary: invalid shipping cost
                  value:
                    errors:
                      title: "invalid_shipping_cost"
                      message: "invalid shipping cost"
                InvalidPrice:
                  summary: invalid price
                  value:
                    errors:
                      title: "invalid_price"
                      message: "invalid price"
                InvalidPlatformPartnerCoupon:
                  summary: invalid platform partner coupon
                  value:
                    errors:
                      title: "invalid_platform_partner_coupon"
                      message: "invalid platform partner coupon"
                InvalidShopCoupon:
                  summary: invalid shop coupon
                  value:
                    errors:
                      title: "invalid_shop_coupon"
                      message: "invalid shop coupon"
                InvalidPoint:
                  summary: invalid point
                  value:
                    errors:
                      title: "invalid_point"
                      message: "invalid point"
                InvalidSummary:
                  summary: invalid summary
                  value:
                    errors:
                      title: "invalid_summary"
                      message: "invalid summary"
                InvalidCouponPayment:
                  summary: invalid coupon payment
                  value:
                    errors:
                      title: "invalid_coupon_payment"
                      message: "invalid coupon payment"
                InvalidIpp:
                  summary: invalid ipp
                  value:
                    errors:
                      title: "invalid_ipp"
                      message: "invalid ipp"
                InvalidIppPromotion:
                  summary: invalid ipp promotion
                  value:
                    errors:
                      title: "invalid_ipp_promotion"
                      message: "invalid ipp promotion"
                ErrorGetUserInfo:
                  summary: error get user info
                  value:
                    errors:
                      title: "error_get_user_info"
                      message: "error get user info"
                NotfoundUserInfo:
                  summary: not found user info
                  value:
                    errors:
                      title: "notfound_user_info"
                      message: "not found user info"
        '401':
          description: Unauthorize
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ErrorGetPromotionDetail:
                  summary: error get promotion detail
                  value:
                    errors:
                      title: "error_get_promotion_detail"
                      message: "error get promotion detail"
                ErrorBreakdownSaleOrder:
                  summary: error breakdown sale order
                  value:
                    errors:
                      title: "error_breakdown_sale_order"
                      message: "error breakdown sale order"
                ErrorGetNoncnocDiscountPoint:
                  summary: error get noncnoc discount point
                  value:
                    errors:
                      title: "error_get_noncnoc_discount_point"
                      message: "error get noncnoc discount point"
                ErrorGetAddress:
                  summary: error get address
                  value:
                    errors:
                      title: "error_get_address"
                      message: "error get address"
                ErrorProductRepository:
                  summary: error product repository
                  value:
                    errors:
                      title: "error_product_repository"
                      message: "cannot get products by SKUs from repository"
                ErrorCouponPaymentValidate:
                  summary: error coupon payment validate
                  value:
                    errors:
                      title: "error_coupon_payment_validate"
                      message: "error coupon payment validate"
                ErrorPromotionPartnershipValidate:
                  summary: error promotion partnership validate
                  value:
                    errors:
                      title: "error_promotion_partnership_validate"
                      message: "error promotion partnership validate"
                ErrorIppAssignment:
                  summary: error ipp assignment
                  value:
                    errors:
                      title: "error_ipp_assignment"
                      message: "error ipp assignment"
                ErrorCreateOrder:
                  summary: error create order
                  value:
                    errors:
                      title: "error_create_order"
                      message: "error create order"
                CreateOrderUnsuccessful:
                  summary: create order unsuccessful
                  value:
                    errors:
                      title: "create_order_unsuccessful"
                      message: "create order unsuccessful"
components:
  schemas:
    baseQuotationRequest:
      type: object
      required:
        - quotationSignature
        - quotationData
      properties:
        quotationSignature:
          type: string
          example: hash HMAC
        quotationData:
          type: string
          example: BASE564
    promotionRequest:
      allOf:
        - $ref: '#/components/schemas/baseQuotationRequest'
      type: object
      properties:
        couponCodes:
          type: array
          items:
            type: string
    quotationPromotionValidationResponse:
      type: object
      properties:
        meta:
          type: object
          properties:
            totalAppliedCount:
              type: number
              example: 3
        data:
          type: object
          required: ["coupons"]
          properties:
            coupons:
              type: array
              items:
                $ref: '#/components/schemas/coupons'
    coupons:
      type: object
      required: ['promotiomId','type', 'couponCode', 'status']
      properties:
        promotionId:
          type: number
          example: 1234
        couponCode:
          type: string
          example: "NN1234"
        limitApplies:
          type: integer
          example: 1
        type:
          type: string
          description: phase1 support only seller platform
          enum:
           - seller
           - platform
           - voucher
           - partner
        status:
          type: string
          enum:
            - VALID
            - NOTFOUND
            - FULLY_REDEEMED
            - ORDER_VALUE_NOT_REACH_MINIMUM
            - USER_NOT_MATCHED
            - USER_TYPE_NOT_REACH_CONDITION
            - ALREADY_REDEEMED
    languageModel:
      type: object
      required: ['en']
      properties:
        en:
          type: string
        th:
          type: string
    errorResponse:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            required: ["title", "message"]
            properties:
              title:
                type: string
              message:
                type: string
    cartReponseModel:
      type: object
      properties:
        cartId:
          type: string
          description: userId or deviceId
          example: 7530
        totalItemCount:
          type: number
          example: 3
        sellers:
          type: array
          items:
            $ref: '#/components/schemas/cartSellerModel'
        unavailableProducts:
          type: array
          items:
               $ref: '#/components/schemas/UnavailableProduct'
    cartSellerModel:
      type: object
      required: 
        - id
        - name 
      properties:
        id:
          type: number
          example: 3530
        name:
          type: string
          example: tnk.seller
        logo:
          type: string
          example: 'http://cdn.nocnoc.com'
        pageUrl:
          type: string
          example: 'http://cdn.nocnoc.com'
        tag:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
                example: quality-shop
              name:
                type: string
                example: quality-shop
        products:
            type: array
            items:
              $ref: '#/components/schemas/cartProductModel'
        promotion:
          type: object
          properties:
            shopCoupon:
              $ref: '#/components/schemas/cartShopPromotionModel'
    cartProductModel:
      type: object
      required: ['id', 'skuNumber', 'selected', 'title', 'price', 'priceOriginal', 'minQuantity', 'quantity', 'stock', 'unit']
      properties:
        id:
          type: string
          example: 'ggghh-dsad-sdfdsf'
        skuNumber:
          type: string
          example: '120123'
        selected:
          type: boolean
          example: true
        title:
          $ref: '#/components/schemas/languageModel'
        pageUrl:
          $ref: '#/components/schemas/languageModel'
        imageUrl:
          type: string
          example: 'https://cdn.nocnoc.com'
        badges:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
                example: sample
              name:
                type: string
                example: sample
              type:
                type: string
                example: badge
        price:
          type: number
          format: double
          example: 123.45
        priceOriginal:
          type: number
          format: double
          example: 150.7
        currency:
          type: string
          example: ฿
          enum:
            - ฿
        cheaperFromAddCartDate:
          type: number
          format: double
          example: 50.5
        minQuantity:
          type: number
          example: 5
        quantity:
          type: number
          example: 10
        isFreeInstallation:
          type: boolean
          example: true
          description: detect from badge free-installation
        stock:
          type: number
          example: 999
        isCustomMade:
          type: boolean
          example: true
        collectionName:
          type: string
          example: white ,1
        categoryId:
            type: number
            example: 12245
        category:
            type: string
            example: Electronic Appliances
        subCategory:
            type: string
            example: Air Conditioners
        subSubCategory:
            type: string
            example: Air Conditioner  
        unit:
          $ref: '#/components/schemas/languageModel'
        bundles:
          type: array
          items:
            $ref: '#/components/schemas/cartProductBundleModel'
    cartProductBundleModel:
        type: object
        required: ['id', 'skuNumber', 'selected', 'parentId', 'price', 'minimumQuantity', 'quantity', 'stock']
        properties:
          id:
            type: object
            example: 'ggghh-dsad-sdfdsf'
          skuNumber:
            type: string
            example: 120123
          selected:
            type: boolean
            example: true
          title:
            $ref: '#/components/schemas/languageModel'
          imageUrl:
            type: string
            example: 'http://cdn.nocnoc.com'
          parentId: 
            type: string
            example: 120124
          price:
            type: number
            format: double
            example: 1200.5
          priceOriginal:
            type: number
            format: double
            example: 1500.6
          currency:
            type: string
            example: ฿
          minimumQuantity:
            type: number
            example: 5
          quantity:
            type: number
            example: 10
          stock:
            type: number
            example: 9990
          collectionName:
            type: string
            example: white        
          
    cartShopPromotionModel:
      type: object
      properties:
        discount:
          type: number
          format: double
          example: 5000.5
        items:
          type: array
          items:
            $ref: '#/components/schemas/cartPromotionItemModel'
    cartPromotionItemModel:
      type: object
      required: ["id", "title", "discount", "discountType", "startedAt", "endedAt"]
      properties:
        id:
          type: number
          example: 1245
        title:
          type: string
          example: summer sale
        promotionName:
          type: string
          example: summer sale
        couponCode:
          type: string
          example: "NN-12345"
        maxAllowedDiscount:
          type: number
          example: 5000
        discount:
          type: number
          format: double
          example: 5
        discountType:
          type: string
          example: PERCENT
          enum:
            - PERCENT
            - FLAT
        condition:
          type: string
          description: 'TBC locale logic should in bff or be'
          example: 'เมื่อช้อปครบ ฿3,000, ลดสูงสุด ฿1,500' 
        description:
          type: string
          example: 'คูปองนี้มีจำนวนจำกัด' 
          description: field promotionDetails จาก promotion-service
        imageUrl:
          type: string
          example: "http://nocnoc.com"
        selected:
          type: boolean
          example: true
        startedAt:
          type: string
          example: "2024-04-01T12:00:00Z"
        endedAt:
          type: string
          example: "2024-04-01T12:00:00Z"
    UpdateQuotationRequest:
      type: object
      required:
        - quotationSignature
        - quotationData
      properties:
        quotationSignature:
          type: string
          example: hmac
        quotationData:
          type: string
          example: base64
        addressId:
              type: number
              example: 11150
        sellers:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 0
              saleOrders:
                type: array
                items:
                  type: object
                  properties:
                    defaultDeliveryOption:
                      type: object
                      properties:
                        carrierId:
                          type: integer
                          example: 0
                    saleOrderRef:
                      type: string
                      example: "string"
        invalidProducts:
              type: array
              items:
                type: object
                properties:
                  skuNumber:
                    type: string
                    example: 123
                  quantity:
                    type: number
                    example: 5
                  sellerId:
                    type: number
                    example: 1234
                    required:
                    - skuNumber
                    - quantity
                    - sellerId
    UpdateQuotationResponse:
      type: object
      properties:
        data:
          type: object
          required:
            - quotation
            - quotationSignature
            - quotationData
          properties:
            quotationSignature:
              type: string
              example: hmac
            quotationData:
              type: string
              example: base64
            quotation:
              type: object
              $ref: '#/components/schemas/QuotationDetail'
            invalidProducts:
              type: array
              items:
                 $ref: '#/components/schemas/invalidProducts'
    QuotationDetail:
      type: object
      required:
        - quotationId
        - sellers
        - addressId
      properties:
        quotationId:
          type: string
          example: "MMDD-{{timestamp}}"
        addressId:
          type: number
          example: 15
        sellers:
          type: array
          items:
            $ref: '#/components/schemas/SellerDetail'
    SellerDetail:
      type: object
      required:
        - id
        - name
        - saleOrders
      properties:
        id:
          type: string
          example: 10
        name:
          type: string
          example: "nocnoc"
        logo:
          type: string
          example: "http://cdn.nocnoc.com"
        pageUrl:
          type: string
          example: "http://cdn.nocnoc.com"
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagDetail'
        promotion:
          type: object
          properties:
            shopPromotion:
              type: object
              properties:
                discount:
                  type: number
                  format: float
                  example: 125.51
        saleOrders:
          type: array
          items:
            $ref: '#/components/schemas/SaleOrderDetail'

    SaleOrderDetail:
      type: object
      required:
        - saleOrderRef
        - products
        - defaultDeliveryOption
        - deliveryOptions
      properties:
        saleOrderRef:
          type: string
          example: 1847C5D06DF-182AA283221-1668533823437
        products:
          type: array
          items:
            $ref: '#/components/schemas/ProductDetail'
        defaultDeliveryOption:
          type: object
          required:
            - carrierId
          properties:
           carrierId:
            type: number
            example: 12
        deliveryOptions:
          type: array
          items:
            $ref: '#/components/schemas/DeliveryOptionDetail'
    ProductDetail:
      type: object
      required:
        - skuNumber
        - price
        - priceOriginal
        - currency
      properties:
        skuNumber:
          type: string
          example: 120123
        title:
          type: object
          properties:
            en:
              type: string
            th:
              type: string
        pageUrl:
          type: object
          properties:
            en:
              type: string
            th:
              type: string
        imageUrl:
          type: string
          example: https://cdn.nocnoc.com
        badges:
          type: array
          items:
            $ref: '#/components/schemas/BadgeDetail'
        price:
          type: number
          example: 120.12
        priceOriginal:
          type: number
          example: 120.12
        currency:
          type: string
          example: ฿
        quantity:
          type: integer
          example: 10
        collectionName:
          type: string
          example: white ,1
        categoryId:
          type: number
          example: 12245
        category:
          type: string
          example: Electronic Appliances
        subCategory:
          type: string
          example: Air Conditioners
        subSubCategory:
          type: string
          example: Air Conditioner
    BadgeDetail:
      type: object
      required:
        - type
        - name
        - key
      properties:
        key:
          type: string
          example: example
        name:
          type: string
          example: example
        type:
          type: string
          example: badge
    TagDetail:
      type: object
      properties:
        key:
          type: string
          example: quality-shop
        name:
          type: string
          example: quality-shop
    DeliveryOptionDetail:
      type: object
      required:
        - carrierId
        - carrierName
        - finalShippingCost
        - shippingCost
        - currency
        - title
        - description
        - minExpectedDeliveryTime
        - maxExpectedDeliveryTime
      properties:
        carrierId:
          type: integer
          example: 12
        carrierName:
          type: string
          example: Kerry
        minExpectedDeliveryTime:
          type: string
          format: date-time
        maxExpectedDeliveryTime:
          type: string
          format: date-time
        finalShippingCost:
          type: number
          example: 10
        shippingCost:
          type: number
          example: 50
        platformShippingDiscount:
          type: number
          example: 100
        sellerShippingDiscount:
          type: number
          example: 20
        optionType:
          type: string
          example: standardDelivery
        warehouseAddress:
          type: string
          example: "22 ซอยสามัคคี 3 ถนนประชาชื่น แขวง ท่าทราย เขตห้วยขวาง กรุงเทพมหานคร"
        carrierType:
          type: string
          example: standard
        currency:
          type: string
          example: ฿
    invalidProducts:
              type: array
              items:
                type: object
                properties:
                  collectionName:
                    type: string
                    example: "Fall Collection"
                  currency:
                    type: string
                    example: "฿"
                  imageUrl:
                    type: string
                    example: "https://example.com/image.jpg"
                  price:
                    type: number
                    format: float
                    example: 49.99
                  priceOriginal:
                    type: number
                    format: float
                    example: 79.99
                  quantity:
                    type: integer
                    example: 10
                  sellerId:
                    type: integer
                    example: 1234
                  skuNumber:
                    type: string
                    example: "SKU123456"
                  title:
                    type: object
                    properties:
                      en:
                        type: string
                        example: "Winter Jacket"
                      th:
                        type: string
                        example: "แจ็คเก็ตฤดูหนาว"
                  type:
                    type: string
                    enum: ["OUT_OF_STOCK","UNAVAILABLE"]            
                    required:
                    - skuNumber
                    - quantity
                    - sellerId
                  categoryId:
                    type: number
                    example: 12245
                  category:
                    type: string
                    example: Electronic Appliances
                  subCategory:
                    type: string
                    example: Air Conditioners
                  subSubCategory:
                    type: string
                    example: Air Conditioner  
    CreateQuotationRequest:
      required:
        - sellers
        - addressId
      type: object
      properties:
        addressId:
          type: integer
          example: 1
        couponCodes:
          type: array
          items:
            type: string
            example: "1234"
        sellers:
          type: array
          items:
            type: object
            $ref: '#/components/schemas/CreateQuotationDetail'
            
    CreateQuotationResponse:
      type: object
      properties:
        data:
          type: object
          required:
            - quotation
            - userSelection
          properties:
            quotationSignature:
              type: string
              example: hmac
            quotationData:
              type: string
              example: base64
            quotation:
              type: object
              $ref: '#/components/schemas/QuotationDetail'
            invalidProducts:
              type: array
              items:
                oneOf:
                  - $ref: '#/components/schemas/invalidProducts'

    CreateQuotationDetail:
      type: object
      required:
        - sellerId
        - products
        - couponCodes
      properties:
        sellerId:
          type: string
          example: 123
        products:
          type: array
          items:
            type: object
            required:
                - skuNumber
                - quantity
            properties:
              skuNumber:
                type: string
                example: "123456"
              title:
                type: string
                example: "tv 42 inch"
              quantity:
                type: integer
                example: 10
    UnavailableProduct:
      type: object
      properties:
        collectionName:
          type: string
          example: "Fall Collection"
        currency:
          type: string
          example: "USD"
        id:
          type: string
          example: "12345"
        imageUrl:
          type: string
          example: "https://example.com/image.jpg"
        price:
          type: number
          format: float
          example: 49.99
        priceOriginal:
          type: number
          format: float
          example: 79.99
        skuNumber:
          type: string
          example: "SKU123456"
        title:
          type: object
          properties:
            en:
              type: string
              example: "Winter Jacket"
            th:
              type: string
              example: "แจ็คเก็ตฤดูหนาว"
        type:
          type: string
          enum: [UNAVAILABLE,OUT_OF_STOCK]
        categoryId:
            type: number
            example: 12245
        category:
            type: string
            example: Electronic Appliances
        subCategory:
            type: string
            example: Air Conditioners
        subSubCategory:
            type: string
            example: Air Conditioner
    quotationSummaryRequest:
      type: object
      required:
        - quotationSignature
        - quotationData
        - sellers
      properties:
        quotationSignature:
          type: string
          example: <hmac>
        quotationData:
          type: string
          example: <base64>
        couponCodes:
          type: array
          items: 
            type: string
          example: [""]
        sellers:
          type: array
          items:
            type: object
            required:
            - id
            - saleOrders
            properties:
              id:
                type: number
              saleOrders:
                type: array
                items:
                  type: object
                  required:
                  - saleOrderRef
                  - defaultDeliveryOption
                  properties:
                    saleOrderRef:
                      type: string
                    defaultDeliveryOption:
                      type: object
                      required:
                        - carrierId
                      properties:
                        carrierId:
                          type: number
                          example: 12
        useNocnocPoint:
          type: boolean
          example: true
        # payment:
        #   type: object
        #   description: waiting confirm with platform team
        #   properties:
        #     paymentType:
        #       type: string
        #       example: ""
        #     cardData:
        #       type: object
        #       example: {}
        #     bankCode:
        #       type: string
        #       example: ""
    quotationSummaryResponse:
      type: object
      required: ["data"]
      properties:
        data:
          type: object
          required: ["appliedPromotions", "totalPrice", "totalDiscount", "totalPriceAfterDiscount", "totalShippingFee", "totalShippingFeeAfterDiscount", "grandTotalDiscount", "grandTotal"]
          properties:
            quotationData:
              type: string
              example: "<base64>"
            quotationSignature:
              type: string
              example: "<hmac>"
            coupons:
              type: array
              items:
                properties:
                  promotionId: 
                    type: number
                    example: 12345678
                  couponCode:
                    type: string
                    example: "NN1234"
                  limitApplies:
                    type: number
                    example: 1
                  type:
                    type: string
                    example: "NOCNOC_COUPON"
                  status:
                    type: string
                    enum: [VALID, NOTFOUND, ORDER_VALUE_NOT_REACH_MINIMUM]
                    example: "VALID"
            nocnocPoint:
              type: object
              properties:
                availablePoint:
                  type: number
                  example: 0
                isNocNocClubMember:
                  type: boolean
                  example: true
                pointBalance:
                  type: number
                  example: 0
                pointValue:
                  type: number
                  example: 0
            totalPrice:
              type: number
              example: 56300
            totalShopCouponDiscount:
              type: number
              example: 350
            totalPlatformDiscount:
              type: number
              example: 5630
              description: "total discount from platform coupon (depreciated, use totalPlatformCouponDiscount instead)"
            totalPlatformCouponDiscount:
              type: number
              example: 5630
              description: "total discount from platform coupon"
            totalPartnerCouponDiscount:
              type: number
              example: 0
            totalVoucherDiscount:
              type: number
              example: 1000
            totalDiscount:
              type: number
              example: 6980
            totalNocnocPointDiscount:
              type: number
              example: 40
            totalPriceAfterDiscount:
              type: number
              example: 50320
            totalShippingFee:
              type: number
              example: 1770
            totalSellerShippingDiscount:
              type: number
              example: 10
            totalPlatformShippingDiscount:
              type: number
              example: 270
            totalShippingFeeAfterDiscount:
              type: number
              example: 280
            grandTotalDiscount:
              type: number
              example: 7300
            grandTotal:
              type: number
              example: 50770
            currency:
              type: string
              example: ฿  
    createOrderRequest:
      type: object
      required: ["quotationSignature", "quotationData", "payment"]
      properties:
        quotationSignature:
          type: string
          example: <hmac>
        quotationData:
          type: string
          example: <base64>
        isSmsEnabled:
          type: boolean
        isTaxRequired:
          type: boolean
        payment:
          type: object
          $ref: '#/components/schemas/payment'
        taxAddress:
          type: object
          $ref: '#/components/schemas/taxAddress'
        integrationParams:
          type: object
          $ref: '#/components/schemas/integrationParams'
    payment:
      required: ["paymentType", "currency"]
      type: object
      properties:
        cardId:
          type: string
        cardNumber:
          type: string
        currency:
          type: string
        ippTerm:
          type: integer
        paymentType:
          type: string
          example: "CARD | IPP | QR" 
        redirectUrl:
          type: string
    taxAddress:
      type: object
      properties:
        addressLine1:
          type: string
        addressLine2:
          type: string
        branchCode:
          type: string
        districtName:
          type: string
        fullName:
          type: string
        phoneNo:
          type: string
        province:
          type: string
        subDistrictName:
          type: string
        taxId:
          type: string
        taxType:
          type: string
        zipCode:
          type: string
    integrationParams:
      type: object
      properties:
        fallback:
          type: string
        refId:
          type: string
        sourceTime:
          type: integer
        utmContent:
          type: string
        utmMedium:
          type: string
        utmSource:
          type: string
        utmTerm:
          type: string
    createOrderResponse:
      type: object
      required: ["data"]
      properties:
        data:
          type: object
          $ref: '#/components/schemas/order'
    order:
      type: object
      properties:
        authorizeUrl:
          type: string
        expireAt:
          type: string
        msg:
          type: string
        orderNo:
          type: string
        orderStatus:
          type: string
        paymentType:
          type: string
        scannableCode:
          type: string
        transactionId:
          type: string
    adminCreateOrderRequest:
      type: object
      required: ["quotationSignature", "quotationData", "payment", "buyer"]
      properties:
        quotationSignature:
          type: string
          example: <hmac>
        quotationData:
          type: string
          example: <base64>
        isSmsEnabled:
          type: boolean
        isTaxRequired:
          type: boolean
        payment:
          type: object
          $ref: '#/components/schemas/payment'
        taxAddress:
          type: object
          $ref: '#/components/schemas/taxAddress'
        buyer:
          type: object
          required:
            - userId
          properties:
            userId:
              type: integer
              example: 10001
            email:
              type: string
              example: buyer@email.com
            phone:
              type: string
              example: 0812345678
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
      bearerFormat: "JWT"
      
security:
  - bearer: []

